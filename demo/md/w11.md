### w11

```
page

// 1. 'use client' 是 Next.js 的指令
// 宣告這個檔案是「客戶端元件」，因為我們用了 useState 這種需要瀏覽器互動的功能
'use client'

// 匯入 React 的 Hook (鉤子)
import { useState } from 'react'

// 匯入外部的 CSS 樣式包裹器 (讓畫面置中或有好看的背景)
import Wrapper from '../../_assets/_wrapper/Tutorials_xx'

// 匯入假資料 (這通常是一個包含 id 和 name 的物件陣列)
import { data } from '../../_assets/_data/data'

// 註解提示：如果是更複雜的大型專案，通常會改用 Context API 或 Redux
// 來避免下面會看到的「一層一層傳遞 (Prop Drilling)」的問題

// --- [第一層：祖父元件] ---
// 這是資料的源頭，負責管理狀態
const PropDrilling_02 = () => {
  // 建立狀態 (State)
  // people: 目前的資料列表 (預設值是匯入的 data)
  // setPeople: 用來修改 people 的函式
  const [people, setPeople] = useState(data)

  // 用來除錯，在瀏覽器 Console 查看目前的資料長怎樣
  console.log('data', data)

  // 定義「刪除功能」的函式
  // 這個函式會被一層一層傳下去給最底下的按鈕呼叫
  const removePerson = (id) => {
    // 使用 setPeople 更新狀態
    // 這裡使用 filter 方法：留下 id 「不等於」目標 id 的人
    // (也就是把目標 id 的人踢出陣列)
    setPeople((people) => {
      return people.filter((person) => person.id !== id)
    })
  }

  return (
    <Wrapper>
      <div className='container'>
        <h3>prop drilling</h3>
        {/* [重點：屬性鑽取 Prop Drilling]
          我們把 people (資料) 和 removePerson (修改資料的方法)
          都當作 props 傳給下一層的 List 元件。
        */}
        <List people={people} removePerson={removePerson} />
      </div>
    </Wrapper>
  )
}

// --- [第二層：父親元件 (中間人)] ---
// List 元件其實「不需要」用到 removePerson 功能，
// 但為了傳給下面的 SinglePerson，它被迫要接收這個 props。
const List = ({ people, removePerson }) => {
  return (
    <>
      {/* 使用 map 跑迴圈，把資料陣列轉變成一堆 SinglePerson 元件 */}
      {people.map((person) => {
        return (
          <SinglePerson
            // React 列表渲染時，必須要有獨一無二的 key，通常用 id
            key={person.id}

            // {...person} 是「展開運算子」
            // 意思是把 person 物件裡的所有屬性 (id, name, age...) 全部拆開傳下去
            // 等同於寫：id={person.id} name={person.name} ...
            {...person}

            // 繼續把祖父給的 removePerson 往下傳給孫子
            removePerson={removePerson}
          />
        )
      })}
    </>
  )
}

// --- [第三層：孫子元件 (執行者)] ---
// 這裡才是真正使用資料 (顯示 name) 和使用功能 (呼叫 removePerson) 的地方
const SinglePerson = ({ id, name, removePerson }) => {
  return (
    <div className='item'>
      {/* 顯示名字 */}
      <h4>{name}</h4>

      {/* 刪除按鈕 */}
      {/* onClick 綁定一個箭頭函式，當點擊時呼叫 removePerson 並把自己的 id 傳回去 */}
      <button className='btn' onClick={() => removePerson(id)}>
        remove
      </button>
    </div>
  )
}

export default PropDrilling_02
```
