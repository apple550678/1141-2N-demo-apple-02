### w13_1

```
page
'use client'

import { useState } from 'react'
import blogData_02 from '../../_assets/data/blogData.json' // 匯入靜態資料
import Blog2_02 from '../../_components/Blog2_02' // 匯入單篇文章元件
import Wrapper from '../../_assets/wrapper/Blog2_02' // 匯入 CSS 樣式包裹器
import Alert_02 from '../../_components/Alert_02' // 匯入通知元件

const BlogLocalJsonPage2_02 = () => {
  // --- [定義狀態 State] ---
  const [name, setName] = useState('李國蘋')
  const [id, setId] = useState(213410102)
  const [blogs_02, setBlogs_02] = useState(blogData_02) // 文章列表

  // Alert 的狀態：控制顯示(show)、訊息(msg)、類型(type)
  const [alert, setAlert] = useState({
    show: false,
    msg: '',
    type: '',
  })

  // --- [定義功能函式] ---

  // 控制通知顯示的函式
  const showAlert = (show = false, msg = '', type = '') => {
    setAlert({ show, msg, type })
  }

  // 刪除單篇文章
  const removeItem = (id) => {
    showAlert(true, 'blog removed', 'danger') // 跳出紅色通知
    // 使用 filter 過濾，留下 ID 不等於目標 ID 的文章 (等於刪除目標)
    setBlogs_02(blogs_02.filter((blog) => blog.id !== id))
  }

  // 清空所有文章
  const clearAllBlogs = () => {
    showAlert(true, 'clear all blogs', 'danger') // 跳出紅色通知
    setBlogs_02([]) // 設定為空陣列
  }

  // 重新載入所有文章
  const loadAllBlogs = () => {
    showAlert(true, 'load all blogs', 'success') // 跳出綠色通知
    setBlogs_02([]) // 先清空 (可選)
    setBlogs_02(blogData_02) // 重新讀取 JSON 資料
  }

  return (
    <Wrapper>
      {/* 條件渲染：如果 alert.show 為 true，才顯示 Alert_02 元件 */}
      {/* 注意這裡把 alert 和 showAlert 傳進去了 (Prop Drilling) */}
      {alert.show && <Alert_02 alert={alert} showAlert={showAlert} />}

      <section className='blogs'>
        <div className='section-title'>
          <h2>
            blogs from local json 2 -- {name}, {id}
            {''}
          </h2>
        </div>

        <div className='blogs-center'>
          {/* 使用 map 迴圈遍歷文章列表 */}
          {blogs_02.map((item) => {
            // 解構賦值，把 item 裡的資料拆出來
            const { id, title, descrip, category, img } = item
            return (
              // 渲染單篇文章元件
              <Blog2_02
                key={id}       // React 列表必備的唯一 key
                id={id}
                title={title}
                descrip={descrip}
                category={category}
                img={img}
                removeItem={removeItem} // [重點] 把刪除函式傳給子元件，讓它裡面可以按按鈕
              />
            )
          })}
        </div>

        {/* 下方的兩個大按鈕 */}
        <div className='flex justify-center items-center gap-8 mt-8'>
          <button
            type='button'
            className='text-red-700 bg-red-200 hover:bg-red-300 capitalize px-4 py-2 text-base rounded'
            onClick={clearAllBlogs}
          >
            clear all blogs
          </button>
          <button
            type='button'
            className='text-blue-700 bg-blue-200 hover:bg-blue-300 capitalize px-4 py-2 text-base rounded'
            onClick={loadAllBlogs}
          >
            load all blogs
          </button>
        </div>
      </section>
    </Wrapper>
  )
}

export default BlogLocalJsonPage2_02
```

```
alert

import { useEffect } from 'react'

// 接收兩個 props:
// 1. alert: 包含要顯示的訊息 (msg) 和類型 (type)
// 2. showAlert: 用來控制顯示/隱藏的函式
const Alert_02 = ({ alert, showAlert }) => {

  // --- [自動消失機制] ---
  useEffect(() => {
    // 設定一個計時器，3000毫秒 (3秒) 後執行
    const timeout = setTimeout(() => {
      showAlert() // 呼叫不帶參數的 showAlert，預設會把 show 改為 false (關閉通知)
    }, 3000)

    // 清理函式 (Cleanup Function)
    // 如果使用者在 3 秒內又觸發了新的通知，這行會清除上一個計時器，避免時間錯亂
    return () => clearTimeout(timeout)
  }, [alert]) // 只要 alert 狀態改變，就重新設定計時器

  // --- [根據類型顯示不同顏色] ---

  // 如果是成功訊息 (success) -> 綠色
  if (alert.type === 'success') {
    return (
      <p className='grid items-center text-center capitalize text-green-700 bg-green-200'>
        {alert.msg}
      </p>
    )
  }
  // 如果是危險/警告訊息 (danger) -> 紅色
  else if (alert.type === 'danger') {
    return (
      <p className='grid items-center text-center capitalize text-red-700 bg-red-200'>
        {alert.msg}
      </p>
    )
  }
}

export default Alert_02
```

```
blog
import { FaGlobe } from 'react-icons/fa6' // 地球圖示 (Travel)
import { FaMugSaucer } from 'react-icons/fa6' // 咖啡圖示 (Lifestyle)
import Link from 'next/link'

// 接收來自 Page 的 props，包含文章資料和 removeItem 函式
const Blog2_02 = ({ id, img, category, title, descrip, removeItem }) => {
  return (
    <article className='blog'>
      <img src={img} alt='Coffee photo' className='img blog-img' />
      <div className='blog-content'>
        <span className='flex'>
          {category}
          {/* [條件渲染] 根據分類顯示不同的 icon */}
          {category === 'lifestyle' ? (
            <FaMugSaucer className='ml-1' color='blue' size={14} />
          ) : (
            <FaGlobe className='ml-1' color='blue' size={14} />
          )}
        </span>

        <h3>{title}</h3>
        <p>{descrip}</p>

        <div className='flex justify-between items-center'>
          <Link href='#' className='inline-block'>
            read more
          </Link>

          {/* [刪除按鈕] */}
          <button
            type='button'
            className='text-red-700 bg-red-100  capitalize px-2 py-1  hover:bg-red-300 rounded'
            // [重點] 當點擊時，呼叫爸爸 (Page) 給的 removeItem，並把自己的 id 傳回去
            // 這樣爸爸才知道要刪除哪一篇
            onClick={() => removeItem(id)}
          >
            delete
          </button>
        </div>
      </div>
    </article>
  )
}

export default Blog2_02
```
